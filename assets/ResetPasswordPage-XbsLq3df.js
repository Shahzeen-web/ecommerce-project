import{v as f,o as j,B as N,g as o,j as s,L as P,q as y}from"./index-BbEjm1PE.js";const v=void 0;function R(){const{token:w}=f(),p=j(),{register:n,handleSubmit:g,formState:{errors:e},watch:h}=N(),[d,c]=o.useState(""),[l,i]=o.useState(""),[t,m]=o.useState(!1),b=async a=>{var x,u;c(""),i(""),m(!0);try{const r=await y.post(`${v}/api/auth/reset-password/${w}`,{password:a.password});c(r.data.message||"Password reset successful!"),setTimeout(()=>p("/login"),1500)}catch(r){i(((u=(x=r.response)==null?void 0:x.data)==null?void 0:u.message)||"Something went wrong")}finally{m(!1)}};return s.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:s.jsxs("div",{className:"max-w-md w-full p-6 bg-white rounded shadow",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Reset Password"}),s.jsxs("form",{onSubmit:g(b),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1",children:"New Password"}),s.jsx("input",{type:"password",...n("password",{required:"Password is required"}),className:"w-full border p-2 rounded"}),e.password&&s.jsx("p",{className:"text-red-500 text-sm",children:e.password.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1",children:"Confirm Password"}),s.jsx("input",{type:"password",...n("confirmPassword",{required:"Please confirm your password",validate:a=>a===h("password")||"Passwords do not match"}),className:"w-full border p-2 rounded"}),e.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm",children:e.confirmPassword.message})]}),l&&s.jsx("p",{className:"text-red-500 text-sm text-center",children:l}),d&&s.jsx("p",{className:"text-green-600 text-sm text-center",children:d}),s.jsx("button",{type:"submit",disabled:t,className:`w-full py-2 rounded text-white ${t?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:t?"Resetting...":"Reset Password"})]}),s.jsx("div",{className:"mt-4 text-sm text-center",children:s.jsx(P,{to:"/login",className:"text-blue-600 hover:underline",children:"Back to Login"})})]})})}export{R as default};
