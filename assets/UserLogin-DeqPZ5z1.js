import{B as w,A as f,o as j,g as l,j as e,L as g,q as N}from"./index-BbEjm1PE.js";const v="https://ecommerce-project-production-28e7.up.railway.app";function k(){const{register:d,handleSubmit:h,formState:{errors:t}}=w(),a=f(s=>s.setToken),o=j(),[n,c]=l.useState(!1),[m,u]=l.useState("");l.useEffect(()=>{const s=localStorage.getItem("authToken");s&&(a(s),o("/"))},[a,o]);const b=async s=>{var p,x;u(""),c(!0);try{const i=(await N.post(`${v}/api/auth/login`,s)).data.token;if(!i)throw new Error("No token returned from server");a(i),localStorage.setItem("authToken",i),o("/")}catch(r){console.error("‚ùå Login failed:",r),u(((x=(p=r.response)==null?void 0:p.data)==null?void 0:x.message)||r.message||"Invalid email or password. Try again.")}finally{c(!1)}};return e.jsxs("div",{className:"max-w-sm mx-auto p-6 mt-10 border rounded shadow bg-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"User Login"}),m&&e.jsx("div",{className:"mb-4 text-red-600 text-sm bg-red-100 p-2 rounded",children:m}),e.jsxs("form",{onSubmit:h(b),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{...d("email",{required:"Email is required"}),type:"email",className:"w-full border p-2 rounded",placeholder:"Email"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email.message})]}),e.jsxs("div",{children:[e.jsx("input",{...d("password",{required:"Password is required"}),type:"password",className:"w-full border p-2 rounded",placeholder:"Password"}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password.message})]}),e.jsx("button",{type:"submit",disabled:n,className:`w-full text-white p-2 rounded ${n?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n?"Logging in...":"Login"})]}),e.jsxs("div",{className:"mt-4 text-sm flex justify-between",children:[e.jsx(g,{to:"/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot Password?"}),e.jsx(g,{to:"/signup",className:"text-blue-600 hover:underline",children:"Create Account"})]})]})}export{k as default};
